#!/usr/bin/env node

const program = require('commander');
const inquirer = require('inquirer');
const gitAccount = require('..');

program
  .parse(process.argv);

const users = gitAccount.listUsers();

inquirer.prompt([{
	type: 'list',
	name: 'user',
	message: 'choose one',
	choices: users.map(value => ({
		name: `${value.name} <${value.email}>`,
		value
	}))
}]).then(answers => {
	const {user} = answers;
	console.log(user);
	gitAccount.switchAccount(user).then(result => {
		console.log(result);
	});
});
